# Payment Processors Configuration Guide

## Overview

The Skyeface system supports multiple payment processors with the ability to switch between them if one goes down. Currently supported processors are:

- **Flutterwave** - Primary payment processor (with Sandbox and Live environments)
- **Paystack** - Secondary payment processor (with Test and Live environments)

## Access Payment Processor Settings

1. Go to **Admin Dashboard**
2. Navigate to **Settings → Payment Processors**
3. Or directly visit: `/admin/settings/payment-processors`

---

## Setting Up Flutterwave

### Prerequisites
- Active Flutterwave merchant account
- Flutterwave Dashboard access

### Step-by-Step Setup

#### 1. Get Your Flutterwave API Keys
1. Log in to your [Flutterwave Dashboard](https://dashboard.flutterwave.com)
2. Click on **Settings** (bottom left sidebar)
3. Click on **API Keys**
4. You'll see two keys:
   - **Public Key**: Used for frontend integration
   - **Secret Key**: Used for backend/server-side transactions
5. Copy both keys

#### 2. Enter Keys in Skyeface
1. In the Skyeface admin panel, go to **Settings → Payment Processors**
2. Scroll to the **Flutterwave Configuration** section
3. Paste your keys:
























































































































































































































































































































**Created By**: Skyeface Admin System**Last Updated**: January 12, 2026---| 1.0 | January 2026 | Initial release with Flutterwave & Paystack support ||---------|------|---------|| Version | Date | Changes |## Version History---- **Support**: https://paystack.com/contact- **Dashboard**: https://dashboard.paystack.com- **Documentation**: https://paystack.com/docs### Paystack- **Support**: https://support.flutterwave.com- **Dashboard**: https://dashboard.flutterwave.com- **Documentation**: https://developer.flutterwave.com/docs### Flutterwave## Support & Additional Resources---```?>}    // ... Paystack integration code    $secretKey = $processorConfig['secret_key'];    $publicKey = $processorConfig['public_key'];    // Use Paystack API} elseif ($processor === 'paystack') {    // ... Flutterwave integration code    $secretKey = $processorConfig['secret_key'];    $publicKey = $processorConfig['public_key'];    // Use Flutterwave APIif ($processor === 'flutterwave') {// In a payment service or controller$processorConfig = config("payment.{$processor}");$processor = config('payment.active_processor');// Get the active processor configuration<?php```php### Using the Active Processor in Your Application## API Integration Examples---```PAYMENT_TEST_MODE=falsePAYMENT_WEBHOOK_SECRET=your-webhook-secret-herePAYMENT_TIMEOUT=30PAYMENT_CURRENCY=NGN# Global Payment SettingsPAYSTACK_ENABLED=truePAYSTACK_CURRENCY=NGNPAYSTACK_ENVIRONMENT=testPAYSTACK_SECRET_KEY=sk_test_xxxxxPAYSTACK_PUBLIC_KEY=pk_test_xxxxx# Paystack ConfigurationFLUTTERWAVE_ENABLED=trueFLUTTERWAVE_ENVIRONMENT=sandboxFLUTTERWAVE_ENCRYPT_KEY=FLUTTERWAVE_SECRET_KEY=sk_test_xxxxxFLUTTERWAVE_PUBLIC_KEY=pk_test_xxxxx# Flutterwave ConfigurationPAYMENT_ACTIVE_PROCESSOR=flutterwave# Active Payment Processor```env### Environment Variables (.env)## Configuration File Reference---4. Try again after a few seconds3. Clear browser cache2. Check if you have permission to edit settings1. Verify both processors are configured with valid keys**Solution:**### Switching Processors Doesn't Work5. Check payment timeout setting4. Test with a processor test card3. Review transaction logs for error details2. Check if the processor is enabled and configured1. Verify the active processor is correctly set**Solution:**### Transactions Not Processing4. Review webhook logs for detailed error messages3. Check if the webhook endpoint is accessible2. Verify the webhook URL in the payment processor's dashboard1. Ensure webhook secret is correctly configured**Solution:**### "Webhook Verification Failed"4. Ensure your server can reach the processor's API endpoint3. Check if your firewall is blocking outbound connections2. Verify the payment processor's server is up (check their status page)1. Check your internet connection**Solution:**### "Connection Failed" Error4. Ensure the keys are for the selected environment (sandbox vs. live)3. Check if your API keys have expired or been regenerated2. Check you're using keys for the correct environment (test vs. live)1. Verify you copied the keys correctly (no extra spaces)**Solution:**### "Invalid API Keys" Error## Troubleshooting---- Forget to update webhook endpoints- Leave test mode enabled in production- Ignore connection errors- Leave payment processors unconfigured❌ **DON'T:**- Test processors periodically for connectivity- Keep API keys updated if regenerated- Review failed transactions- Check transaction success rates- Monitor payment logs regularly✅ **DO:**### Maintenance- Ignore webhook notifications- Skip testing before switching to production- Test with live credentials without proper controls- Use real cards in test environment❌ **DON'T:**- Test fallback to secondary processor- Verify webhook delivery- Test both successful and failed transactions- Use test cards provided by the payment processor- Always test with sandbox/test environment first✅ **DO:**### Testing- Expose API keys in error messages or logs- Use the same keys for test and production- Commit API keys to version control- Share secret keys via email or chat- Hardcode API keys in your application❌ **DON'T:**- Use different keys for sandbox/test and live environments- Regenerate keys periodically- Store keys securely in environment variables- Never share your secret keys- Use strong, unique API keys for each environment✅ **DO:**### Security## Best Practices---- Keep both processors updated with current API keys- Both processors should be configured before relying on them- Switching processors does NOT affect previously processed transactions### Important Notes5. The system will now use the selected processor for new transactions4. Confirm the switch3. Click **Switch Processor**2. Under **Active Processor**, select the processor you want to use1. Go to **Settings → Payment Processors**### How to Switch- You want to route new payments through a different processor- You're experiencing issues with the current processor- Your primary processor is temporarily down### When to Switch## Switching Payment Processors---- **WARNING**: Do not enable in production!- Overrides individual processor environment settings- Useful for development and testing- When enabled, ALL transactions use test/sandbox environment### Test Mode- Used to prevent unauthorized webhook calls- Generate a strong, unique key- Secret key for verifying incoming webhook requests from payment processors### Webhook Secret- If payment isn't confirmed within this time, it's considered failed- Range: 5 - 120 minutes- Default: 30 minutes- How long (in minutes) the system waits for payment confirmation### Payment Timeout- **EUR**: Euro- **GBP**: British Pound- **USD**: US Dollar- **NGN**: Nigerian NairaThe default currency for all transactions. Options:### Currency## Global Payment Settings---| 4000000000000002 | 01/25 | 123 | Any name | Failed || 6011111111111117 | 01/25 | 123 | Any name | Successful (Discover) || 378282246310005 | 01/25 | 123 | Any name | Successful (Amex) || 5555555555554444 | 01/25 | 123 | Any name | Successful || 4111111111111111 | 01/25 | 123 | Any name | Successful ||------------|----------|-----|------|--------|| Card Number | Exp Date | CVV | Name | Status |Use these cards for testing:### Paystack Test Cards (Test Environment Only)- Click **Switch Processor**- Select **Paystack** from the dropdown- Scroll to the top under **Active Processor**#### 6. Set as Active Processor (if needed)- Click **Save Paystack**- Check the **Enable Paystack** checkbox#### 5. Enable Paystack- **USD**: US Dollar- **ZAR**: South Africa Rand- **KES**: Kenya Shilling- **GHS**: Ghana Cedi- **NGN**: Nigerian Naira (default)- Choose the default currency for Paystack transactions#### 4. Select Currency- **Live**: For production transactions (real money)- **Test**: For testing transactions (no real money involved)#### 3. Choose Environment   - Secret Key: `sk_test_...` (for test) or `sk_live_...` (for live)   - Public Key: `pk_test_...` (for test) or `pk_live_...` (for live)3. Paste your keys:2. Scroll to the **Paystack Configuration** section1. In the Skyeface admin panel, go to **Settings → Payment Processors**#### 2. Enter Keys in Skyeface5. Copy both keys   - **Secret Key**: Used for backend/server-side transactions   - **Public Key**: Used for frontend integration4. You'll see:3. Click on **API Keys & Webhooks**2. Click on **Settings** (top right)1. Log in to your [Paystack Dashboard](https://dashboard.paystack.com)#### 1. Get Your Paystack API Keys### Step-by-Step Setup- Paystack Dashboard access- Active Paystack account### Prerequisites## Setting Up Paystack---| 4007410000000005 | Any future date | Any 3 digits | Any name | Failed || 5399838383838381 | Any future date | Any 3 digits | Any name | Successful || 5438898014666888 | Any future date | Any 3 digits | Any name | Successful || 4242424242424242 | Any future date | Any 3 digits | Any name | Successful ||------------|----------|-----|------|--------|| Card Number | Exp Date | CVV | Name | Status |Use these cards for testing:### Flutterwave Test Cards (Sandbox Only)- Click **Switch Processor**- Select **Flutterwave** from the dropdown- Scroll to the top under **Active Processor**#### 6. Set as Active Processor (if needed)- Click **Save Flutterwave**- Check the **Enable Flutterwave** checkbox#### 5. Enable Flutterwave- **Live**: For production transactions (real money)- **Sandbox**: For testing transactions (no real money involved)#### 4. Choose Environment
- This is optional but recommended for additional security- Flutterwave encryption key (if you have one configured)#### 3. Optional: Encryption Key   - Secret Key: `sk_test_...` (for sandbox) or `sk_live_...` (for live)   - Public Key: `pk_test_...` (for sandbox) or `pk_live_...` (for live)
